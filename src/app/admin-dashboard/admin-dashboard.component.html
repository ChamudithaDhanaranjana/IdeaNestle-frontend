<!-- component -->
<style>
    /* Custom style */
    .header-right {
        width: calc(100% - 3.5rem);
    }
    .sidebar:hover {
        width: 16rem;
    }
    @media only screen and (min-width: 768px) {
        .header-right {
            width: calc(100% - 16rem);
        }        
    }
  </style>
  <div x-data="setup()" :class="{ 'dark': isDark }">
      <div class="min-h-screen flex flex-col flex-auto flex-shrink-0 antialiased bg-white dark:bg-gray-700 text-black dark:text-white">    
        <div class="h-full ml-4 mt-14 mb-10 md:ml-4">
          <!-- Statistics Cards -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 p-4 gap-4">
            <div class="bg-orange-600 dark:bg-gray-800 shadow-lg rounded-md flex items-center justify-between p-3 border-b-4 border-orange-800 dark:border-gray-600 text-white font-medium group">
              <div class="flex justify-center items-center w-14 h-14 bg-white rounded-full transition-all duration-300 transform group-hover:rotate-12">
                <svg width="30" height="30" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="stroke-current text-orange-600 dark:text-gray-800 transform transition-transform duration-500 ease-in-out"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
              </div>
              <div class="text-right">
                <p class="text-2xl">{{ userCount }}</p>
                <p>Users</p>
              </div>
            </div>
            <div class="bg-orange-600 dark:bg-gray-800 shadow-lg rounded-md flex items-center justify-between p-3 border-b-4 border-orange-800 dark:border-gray-600 text-white font-medium group">
              <div class="flex justify-center items-center w-14 h-14 bg-white rounded-full transition-all duration-300 transform group-hover:rotate-12">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="stroke-current text-orange-600 dark:text-gray-800 transform transition-transform duration-500 ease-in-out">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3v6a2 2 0 0 0 2 2h6"></path>
                  </svg>
                  
              </div>
              <div class="text-right">
                <p class="text-2xl">{{ postCount }}</p>
                <p>Posts</p>
              </div>
            </div>
            <div class="bg-orange-600 dark:bg-gray-800 shadow-lg rounded-md flex items-center justify-between p-3 border-b-4 border-orange-800 dark:border-gray-600 text-white font-medium group">
              <div class="flex justify-center items-center w-14 h-14 bg-white rounded-full transition-all duration-300 transform group-hover:rotate-12">
                <svg width="30" height="30" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="stroke-current text-orange-600 dark:text-gray-800 transform transition-transform duration-500 ease-in-out"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
              </div>
              <div class="text-right">
                <p class="text-2xl">{{ sumOfCommentsAndContributions }}</p>
                <p>Engagements</p>
              </div>
            </div>
            <div class="bg-orange-600 dark:bg-gray-800 shadow-lg rounded-md flex items-center justify-between p-3 border-b-4 border-orange-800 dark:border-gray-600 text-white font-medium group">
              <div class="flex justify-center items-center w-14 h-14 bg-white rounded-full transition-all duration-300 transform group-hover:rotate-12">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="stroke-current text-orange-600 dark:text-gray-800 transform transition-transform duration-500 ease-in-out">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    <circle cx="20" cy="2" r="2" fill="red"></circle>
                  </svg>
                  
              </div>
              <div class="text-right">
                <p class="text-2xl"> {{ activeUserCount }}</p>
                <p>Active Users</p>
              </div>
            </div>
          </div>
          <!-- ./Statistics Cards -->
      
          <div class="grid grid-cols-1 lg:grid-cols-2 p-4 gap-4">
      
            <!-- Social Traffic -->
            <div class="relative flex flex-col min-w-0 mb-4 lg:mb-0 break-words bg-gray-50 dark:bg-gray-800 w-full shadow-lg rounded">
              <div class="rounded-t mb-0 px-0 border-0">
                <div class="flex flex-wrap items-center px-4 py-2">
                  <div class="relative w-full max-w-full flex-grow flex-1">
                    <h3 class="font-semibold text-base text-gray-900 dark:text-gray-50">Post Traffic</h3>
                  </div>
                </div>
                <div class="block w-full overflow-x-auto">
                  <table class="items-center w-full bg-transparent border-collapse">
                    <thead>
                      <tr>
                        <th class="px-4 bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-100 align-middle border border-solid border-gray-200 dark:border-gray-500 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">Categories</th>
                        <th class="px-4 bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-100 align-middle border border-solid border-gray-200 dark:border-gray-500 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">Posts</th>
                        <th class="px-4 bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-100 align-middle border border-solid border-gray-200 dark:border-gray-500 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left min-w-140-px"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let category of categoryCounts" class="text-gray-700 dark:text-gray-100">
                        <th class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">{{ category.category }}</th>
                        <td class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">{{ category.count }}</td>
                        <td class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                          <div class="flex items-center">
                            <span class="mr-2">70%</span>
                            <div class="relative w-full">
                              <div class="overflow-hidden h-2 text-xs flex rounded bg-blue-200">
                                <div style="width: 70%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-600"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr *ngFor="let category of categoryPostCounts" class="text-gray-700 dark:text-gray-100">
                        <td class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">{{ category.categoryName }}</td>
                        <td class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">{{ category.postCount }}</td>
                        <td class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                          <div class="flex items-center">
                            <span class="mr-2 w-12">{{ category.percentage.toFixed(2) }}%</span>
                            <div class="relative w-full">
                              <div class="overflow-hidden h-2 text-xs flex rounded bg-orange-200">
                                <div [style.width.%]="category.percentage" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-orange-700"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- ./Social Traffic -->
      
            <!-- Recent Activities -->
            <div class="relative flex flex-col min-w-0 break-words bg-gray-50 dark:bg-gray-800 w-full shadow-lg rounded">
              <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="350" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="10" fill="#228B22">
                  <animate attributeName="r" from="10" to="20" dur="1s" begin="0s;animation1.end" />
                  <animate attributeName="fill-opacity" from="1" to="0" dur="1s" begin="0s;animation1.end" />
                </circle>
                <circle cx="50" cy="50" r="10" fill="#228B22">
                  <animate attributeName="r" from="10" to="20" dur="1s" begin="animation1.end" />
                  <animate attributeName="fill-opacity" from="1" to="0" dur="1s" begin="animation1.end" />
                </circle>
                <animate id="animation1" attributeName="opacity" from="1" to="0" dur="2s" begin="0s;animation2.end" />
                <animate id="animation2" attributeName="opacity" from="1" to="0" dur="2s" begin="animation1.end" />
              </svg>
            </div>
            <!-- ./Recent Activities -->
          </div>
          <!-- Client Table -->
          <div class="md:col-span-2 mt-4 mx-4 xl:col-span-3">
            <h3 class="text-lg font-semibold">Post summaries of recent sprints</h3>
          </div>
          <div class="mt-4 mx-4">
          </div>
          <div class="mt-4 mx-4">
            <div class="w-full overflow-hidden rounded-lg shadow-xs">
              <div class="w-full overflow-x-auto">
                <table class="w-full">
                  <thead>
                    <tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-gray-50 dark:text-gray-400 dark:bg-gray-800">
                      <th class="px-4 py-3">User</th>
                      <th class="px-4 py-3">ID</th>
                      <th class="px-4 py-3">Status</th>
                      <th class="px-4 py-3">Title</th>
                      <th class="px-1 py-1"></th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
                    <tr *ngFor="let post of posts" [ngClass]="{'bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-900 text-gray-700 dark:text-gray-400': post.status === 'APPROVED', 'bg-red-100': post.status === 'RESTRICTED'}">
                      <td class="px-4 py-3">
                        <div class="flex items-center text-sm">
                          <div class="relative hidden w-8 h-8 mr-3 rounded-full md:block">
                            <img class="object-cover w-full h-full rounded-full" src="https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=200&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjE3Nzg0fQ" alt="" loading="lazy" />
                            <div class="absolute inset-0 rounded-full shadow-inner" aria-hidden="true"></div>
                          </div>
                          <div>
                            <p class="font-semibold">{{post.username}}</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">{{post.localDate}}</p>
                          </div>
                        </div>
                      </td>
                      <td class="px-4 py-3 text-sm">{{post.id}}</td>
                      <td class="px-4 py-3 text-xs">
                        <span [ngClass]="{'px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full dark:bg-green-700 dark:text-green-100': post.status === 'APPROVED', 'px-1 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full dark:bg-red-700 dark:text-red-100': post.status === 'RESTRICTED'}">{{post.status}} </span>
                      </td>
                      <td class="px-4 py-3 text-sm">{{post.title}}</td>
                      <td class="px-4 py-3 text-sm">
                        <div class="relative w-full max-w-full ml-auto flex-grow flex-4 text-right">
                            <button [disabled]="post.status === 'RESTRICTED'" [hidden]="post.status === 'RESTRICTED'" (click)="restricted(post.id)" Class="bg-orange-500 dark:bg-gray-100 text-white active:bg-orange-600 dark:text-gray-800 dark:active:text-gray-700 font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none ml-4 ease-linear transition-all duration-150"   type="button">Restrict</button>
                            <button [disabled]="post.status === 'APPROVED'" [hidden]="post.status === 'APPROVED'" (click)="approved(post.id)" class="bg-green-500 dark:bg-gray-100 text-white active:bg-green-600 dark:text-gray-800 dark:active:text-gray-700 font-bold uppercase px-4 py-1 rounded outline-none focus:outline-none ml-4 ease-linear transition-all duration-150" type="button">Approve</button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9 dark:text-gray-400 dark:bg-gray-800">
                <span class="flex items-center col-span-3"> Showing 21-30 of 100 </span>
                <span class="col-span-2"></span>
                <!-- Pagination -->
                <span class="flex col-span-4 mt-2 sm:mt-auto sm:justify-end">
                  <nav aria-label="Table navigation">
                    <ul class="inline-flex items-center">
                      <li>
                        <button (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 0" class="px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple" aria-label="Previous">
                          <svg aria-hidden="true" class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                            <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path>
                          </svg>
                        </button>
                      </li>
                      <li>
                        <button *ngFor="let page of totalPagesArray()" [class.active]="page === currentPage" (click)="onPageChange(page)" class="px-3 py-1 text-black rounded-md focus:outline-none focus:shadow-outline-purple">{{ page + 1 }}</button>
                      </li>
                      <li>
                        <button (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages - 1" class="px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple" aria-label="Next">
                          <svg class="w-4 h-4 fill-current" aria-hidden="true" viewBox="0 0 20 20">
                            <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path>
                          </svg>
                        </button>
                      </li>
                    </ul>
                  </nav>
                </span>                
              </div>
            </div>
          </div>
          <!-- ./Client Table -->
          <!-- Client Table -->
          <div class="md:col-span-2 mt-4 mx-4 xl:col-span-3">
            <h3 class="text-lg font-semibold">User summaries of recent sprints</h3>
          </div>
          <div class="mt-4 mx-4">
            <div class="mt-14">
              <div class="relative mb-4 flex w-full flex-wrap items-stretch">
                <input type="search"
                  [(ngModel)]="searchUsername"
                  (input)="onSearchChange()"
                  class="relative m-0 -mr-0.5 block w-[1px] min-w-0 flex-auto rounded-l border border-solid border-orange-600 bg-transparent bg-clip-padding px-3 py-[0.25rem] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:focus:border-primary"
                  placeholder="Filter by username" 
                  aria-label="Filter by username"
                  aria-describedby="button-addon1" />
                <!-- Search button -->
                <button
                  class="relative z-[2] flex items-center rounded-r bg-orange-600 px-6 py-2.5 text-xs font-medium uppercase leading-tight text-white shadow-md transition duration-150 ease-in-out hover:bg-orange-500 hover:shadow-lg focus:bg-primary-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-primary-800 active:shadow-lg"
                  type="button"
                  id="button-addon1"
                  data-te-ripple-init
                  data-te-ripple-color="light">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="h-5 w-5">
                    <path
                      fill-rule="evenodd"
                      d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
                      clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            </div>
            
          </div>
          <div class="mt-4 mx-4">
            <div class="w-full overflow-hidden rounded-lg shadow-xs">
              <div class="w-1/3 overflow-x sm:w-full">
                <table class="w-full">
                  <thead>
                    <tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-gray-50 dark:text-gray-400 dark:bg-gray-800">
                      <th class="px-4 py-3">Users</th>
                      <th class="px-4 py-3">Status</th>
                      <th class="px-4 py-3">ID</th>
                      <th class="px-4 py-3"></th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
                    <tr *ngFor="let user of filteredUsers; let i = index" [ngClass]="{'bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-900 text-gray-700 dark:text-gray-400': user.state === 'ACTIVE', 'bg-red-100': user.state === 'INACTIVE'}">
                      <ng-container *ngIf="i < paginatedUsers.length">
                        <td class="px-4 py-3">
                          <div class="flex items-center text-sm">
                            <div class="relative hidden w-8 h-8 mr-3 rounded-full md:block">
                              <img class="object-cover w-full h-full rounded-full" src="https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=200&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjE3Nzg0fQ" alt="" loading="lazy" />
                              <div class="absolute inset-0 rounded-full shadow-inner" aria-hidden="true"></div>
                            </div>
                            <div>
                              <p class="font-semibold">{{ user.username }}</p>
                              <p class="text-xs text-gray-600 dark:text-gray-400">{{ user.email }}</p>
                            </div>
                          </div>
                        </td>
                        <td class="px-4 py-3 text-xs">
                          <span [ngClass]="{'px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full dark:bg-green-700 dark:text-green-100': user.state === 'ACTIVE', 'px-1 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full dark:bg-red-700 dark:text-red-100': user.state === 'INACTIVE'}"> {{ user.state }} </span>
                        </td>
                        <td class="px-4 py-3 text-sm">{{ user.id }}</td>
                        <td class="px-4 py-3 text-sm">
                          <div class="relative w-full max-w-full ml-auto flex-grow flex-4 text-right">
                              <button [disabled]="user.state === 'INACTIVE'" [hidden]="user.state === 'INACTIVE'" (click)="deactivateUser(user.username)" Class="bg-orange-500 dark:bg-gray-100 text-white active:bg-orange-600 dark:text-gray-800 dark:active:text-gray-700 font-bold uppercase px-2 py-1 rounded outline-none focus:outline-none ml-4 ease-linear transition-all duration-150"   type="button">Deactivate</button>
                              <button [disabled]="user.state === 'ACTIVE'" [hidden]="user.state === 'ACTIVE'" (click)="activateUser(user.username)" class="bg-green-500 dark:bg-gray-100 text-white active:bg-green-600 dark:text-gray-800 dark:active:text-gray-700 font-bold uppercase px-4 py-1 rounded outline-none focus:outline-none ml-4 ease-linear transition-all duration-150" type="button">Activate</button>
                          </div>
                        </td>
                      </ng-container>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9 dark:text-gray-400 dark:bg-gray-800">
                <span class="flex items-center col-span-3"> Showing 21-30 of 100 </span>
                <span class="col-span-2"></span>
                <!-- Pagination -->
                <div class="flex items-center justify-end mt-4 sm:mt-auto">
                  <span class="flex col-span-4 mt-2 sm:mt-auto sm:justify-end">
                    <nav aria-label="Table navigation">
                      <ul class="inline-flex items-center">
                        <li>
                          <button (click)="goToPreviousPage()" [disabled]="currentPage === 0" class="px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple" aria-label="Previous">
                            <svg aria-hidden="true" class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                              <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path>
                            </svg>
                          </button>
                        </li>
                        
                          <button *ngFor="let page of totalPagesArray()" [class.active]="page === currentPage" (click)="onPageChange(page)" class="px-3 py-1 text-black rounded-md focus:outline-none focus:shadow-outline-purple">{{ page + 1 }}</button>
                        
                        <li>
                          <button (click)="goToNextPage()" [disabled]="currentPage === totalPages - 1" class="px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple" aria-label="Next">
                            <svg class="w-4 h-4 fill-current" aria-hidden="true" viewBox="0 0 20 20">
                              <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path>
                            </svg>
                          </button>
                        </li>
                      </ul>
                    </nav>
                  </span> 
                </div>
                                               
              </div>
            </div>
          </div>
          <!-- ./Client Table -->
        </div>
      </div>
    </div>    
  
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js" defer></script>
    <script>
      const setup = () => {
        const getTheme = () => {
          if (window.localStorage.getItem('dark')) {
            return JSON.parse(window.localStorage.getItem('dark'))
          }
          return !!window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        }
  
        const setTheme = (value) => {
          window.localStorage.setItem('dark', value)
        }
  
        return {
          loading: true,
          isDark: getTheme(),
          toggleTheme() {
            this.isDark = !this.isDark
            setTheme(this.isDark)
          },
        }
      }
    </script>